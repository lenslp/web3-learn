# Shell 常用命令整理

## 文件和目录操作

### ls - 列出目录内容
```bash
ls              # 列出当前目录
ls -l           # 详细列表
ls -la          # 显示隐藏文件
ls -lh          # 人性化显示文件大小
ls -lt          # 按修改时间排序
```

### cd - 切换目录
```bash
cd /path/to/dir  # 切换到指定目录
cd ~             # 切换到用户主目录
cd ..            # 返回上一级目录
cd -             # 返回上一次所在目录
```

### pwd - 显示当前目录
```bash
pwd              # 打印当前工作目录完整路径
```

### mkdir - 创建目录
```bash
mkdir dirname              # 创建目录
mkdir -p parent/child      # 递归创建多层目录
mkdir -m 755 dirname       # 创建目录并设置权限
```

### rm - 删除文件/目录
```bash
rm file.txt              # 删除文件
rm -f file.txt           # 强制删除，不提示
rm -r dirname            # 递归删除目录
rm -rf dirname           # 强制递归删除目录（危险！）
```

### cp - 复制文件/目录
```bash
cp source.txt dest.txt        # 复制文件
cp -r source_dir dest_dir     # 递归复制目录
cp -p file.txt backup.txt     # 保留文件属性
cp -u file.txt backup.txt     # 只在源文件较新时才复制
```

### mv - 移动/重命名
```bash
mv old.txt new.txt           # 重命名文件
mv file.txt /path/to/dir/    # 移动文件
mv -i file.txt dest.txt      # 交互式（覆盖前提示）
```

### touch - 创建空文件或更新时间戳
```bash
touch file.txt               # 创建空文件或更新修改时间
touch -t 202312291200 file   # 设置指定时间戳
```

### cat - 查看文件内容
```bash
cat file.txt                 # 显示文件内容
cat file1.txt file2.txt      # 合并显示多个文件
cat > file.txt               # 创建文件并输入内容（Ctrl+D结束）
```

### less/more - 分页查看
```bash
less file.txt                # 分页查看（可前后翻页）
more file.txt                # 分页查看（只能向后）
```

### head/tail - 查看文件开头/结尾
```bash
head file.txt                # 显示前10行
head -n 20 file.txt          # 显示前20行
tail file.txt                # 显示后10行
tail -n 20 file.txt          # 显示后20行
tail -f log.txt              # 实时查看文件更新（日志监控）
```

## 文本处理

### grep - 文本搜索
```bash
grep "pattern" file.txt           # 在文件中搜索
grep -r "pattern" directory       # 递归搜索目录
grep -i "pattern" file.txt        # 忽略大小写
grep -v "pattern" file.txt        # 反向匹配（不包含）
grep -n "pattern" file.txt        # 显示行号
grep -c "pattern" file.txt        # 统计匹配行数
```

### find - 查找文件
```bash
find . -name "*.txt"              # 按名称查找
find . -type f                    # 查找文件
find . -type d                    # 查找目录
find . -mtime -7                  # 查找7天内修改的文件
find . -size +100M                # 查找大于100M的文件
find . -name "*.log" -delete      # 查找并删除
```

### sed - 流编辑器
```bash
sed 's/old/new/' file.txt                 # 替换每行第一个匹配
sed 's/old/new/g' file.txt                # 替换所有匹配
sed -i 's/old/new/g' file.txt             # 直接修改文件
sed -n '10,20p' file.txt                  # 打印第10到20行
```

### awk - 文本分析工具
```bash
awk '{print $1}' file.txt                 # 打印第一列
awk -F: '{print $1}' /etc/passwd          # 指定分隔符
awk '$3 > 100' file.txt                   # 条件过滤
```

### sort - 排序
```bash
sort file.txt                             # 按字母排序
sort -n file.txt                          # 按数字排序
sort -r file.txt                          # 倒序
sort -u file.txt                          # 去重排序
```

### uniq - 去重
```bash
uniq file.txt                             # 去除连续重复行
sort file.txt | uniq                      # 先排序再去重
uniq -c file.txt                          # 统计重复次数
```

### wc - 统计
```bash
wc file.txt                               # 统计行数、单词数、字节数
wc -l file.txt                            # 只统计行数
wc -w file.txt                            # 只统计单词数
```

## 系统信息与进程管理

### ps - 查看进程
```bash
ps aux                                    # 显示所有进程
ps aux | grep nginx                       # 查找特定进程
ps -ef                                    # 显示完整格式进程列表
```

### top/htop - 实时进程监控
```bash
top                                       # 实时显示系统资源使用情况
htop                                      # 交互式进程查看器（更友好）
```

### kill - 终止进程
```bash
kill PID                                  # 终止进程
kill -9 PID                               # 强制终止
killall process_name                      # 按名称终止所有匹配进程
```

### df - 磁盘空间
```bash
df -h                                     # 查看磁盘使用情况
df -i                                     # 查看inode使用情况
```

### du - 目录大小
```bash
du -sh directory                          # 显示目录总大小
du -h --max-depth=1                       # 显示当前目录下各子目录大小
```

### free - 内存使用
```bash
free -h                                   # 显示内存使用情况
```

### uname - 系统信息
```bash
uname -a                                  # 显示所有系统信息
uname -r                                  # 显示内核版本
```

## 网络命令

### ping - 测试网络连接
```bash
ping google.com                           # 测试连通性
ping -c 4 google.com                      # 发送4个包后停止
```

### curl - 数据传输
```bash
curl https://example.com                  # 获取网页内容
curl -O https://example.com/file.zip      # 下载文件
curl -X POST -d "data" url                # POST请求
curl -H "Authorization: token" url        # 添加请求头
```

### wget - 下载文件
```bash
wget https://example.com/file.zip         # 下载文件
wget -c url                               # 断点续传
wget -r url                               # 递归下载
```

### netstat - 网络状态
```bash
netstat -tuln                             # 显示监听端口
netstat -an                               # 显示所有连接
```

### ssh - 远程连接
```bash
ssh user@host                             # 连接远程主机
ssh -p 2222 user@host                     # 指定端口
ssh -i key.pem user@host                  # 使用密钥
```

### scp - 远程复制
```bash
scp file.txt user@host:/path/             # 复制到远程
scp user@host:/path/file.txt .            # 从远程复制
scp -r dir user@host:/path/               # 递归复制目录
```

## 权限管理

### chmod - 修改权限
```bash
chmod 755 file.sh                         # 设置权限（rwxr-xr-x）
chmod +x file.sh                          # 添加执行权限
chmod -R 644 directory                    # 递归修改目录权限
```

### chown - 修改所有者
```bash
chown user:group file.txt                 # 修改所有者和组
chown -R user directory                   # 递归修改目录所有者
```

## 压缩解压

### tar - 打包/解包
```bash
tar -czf archive.tar.gz directory         # 打包并压缩（gzip）
tar -xzf archive.tar.gz                   # 解压gzip包
tar -cjf archive.tar.bz2 directory        # 打包并压缩（bzip2）
tar -xjf archive.tar.bz2                  # 解压bzip2包
tar -tf archive.tar.gz                    # 查看压缩包内容
```

### zip/unzip - ZIP压缩
```bash
zip archive.zip file.txt                  # 压缩文件
zip -r archive.zip directory              # 递归压缩目录
unzip archive.zip                         # 解压
unzip -l archive.zip                      # 查看内容不解压
```

## 输出与管道

### echo - 输出文本
```bash
echo "Hello, World!"                      # 打印文本
echo $PATH                                # 打印变量
echo "text" > file.txt                    # 重定向覆盖
echo "text" >> file.txt                   # 重定向追加
```

### 管道与重定向
```bash
command1 | command2                       # 管道：传递输出
command > file.txt                        # 标准输出重定向（覆盖）
command >> file.txt                       # 标准输出重定向（追加）
command 2> error.log                      # 错误输出重定向
command &> all.log                        # 所有输出重定向
command < input.txt                       # 输入重定向
```

## 其他常用

### which - 查找命令路径
```bash
which node                                # 显示命令完整路径
```

### alias - 命令别名
```bash
alias ll='ls -la'                         # 创建别名
unalias ll                                # 删除别名
```

### history - 命令历史
```bash
history                                   # 显示历史命令
history | grep "keyword"                  # 搜索历史命令
!100                                      # 执行第100条历史命令
!!                                        # 执行上一条命令
```

### export - 设置环境变量
```bash
export VAR_NAME="value"                   # 设置环境变量
export PATH=$PATH:/new/path               # 添加到PATH
```

### source - 执行脚本
```bash
source script.sh                          # 在当前Shell执行脚本
. script.sh                               # 同上（简写）
```

### man - 查看手册
```bash
man command                               # 查看命令手册
man -k keyword                            # 搜索相关命令
```